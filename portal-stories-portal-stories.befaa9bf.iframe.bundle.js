"use strict";(self.webpackChunkmd3_ui=self.webpackChunkmd3_ui||[]).push([[109],{"./packages/portal/stories/portal.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,WithMountRef:()=>WithMountRef,__namedExportsOrder:()=>__namedExportsOrder,default:()=>portal_stories});var react=__webpack_require__("./node_modules/react/index.js"),md3_ui_hooks_cjs_prod=__webpack_require__("./packages/hooks/dist/md3-ui-hooks.cjs.prod.js"),md3_ui_utils_cjs_prod=__webpack_require__("./packages/utils/dist/md3-ui-utils.cjs.prod.js"),findNodeHandle=__webpack_require__("./node_modules/react-native-web/dist/exports/findNodeHandle/index.js"),Platform=__webpack_require__("./node_modules/react-native-web/dist/exports/Platform/index.js"),View=__webpack_require__("./node_modules/react-native-web/dist/exports/View/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),PortalContext=react.createContext(void 0),PortalProvider=function PortalProvider(_ref){var children=_ref.children,rootRef=react.useRef(null),_React$useState=react.useState("web"===Platform.Z.OS&&"undefined"!=typeof document?{rootRef:{current:document.body}}:{}),context=_React$useState[0],setContext=_React$useState[1];return react.useEffect((function(){"web"!==Platform.Z.OS&&setContext({rootRef})}),[]),(0,jsx_runtime.jsx)(PortalContext.Provider,{value:context,children:"web"===Platform.Z.OS?children:(0,jsx_runtime.jsx)(View.Z,{ref:rootRef,collapsable:!1,children:null!=rootRef.current&&children})})};PortalProvider.displayName="PortalProvider";try{PortalProvider.displayName="PortalProvider",PortalProvider.__docgenInfo={description:"",displayName:"PortalProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/portal/src/context.tsx#PortalProvider"]={docgenInfo:PortalProvider.__docgenInfo,name:"PortalProvider",path:"packages/portal/src/context.tsx#PortalProvider"})}catch(__react_docgen_typescript_loader_error){}var react_dom=__webpack_require__("./node_modules/react-dom/index.js"),createNativePortal=function createNativePortal(){return null};try{"web"!==Platform.Z.OS&&(createNativePortal=Object(function webpackMissingModule(){var e=new Error("Cannot find module 'react-native/Libraries/Renderer/shims/ReactNative'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(_unused){}var Portal=react.forwardRef((function(_ref,ref){var children=_ref.children,containerRef=_ref.containerRef,_ref$disablePortal=_ref.disablePortal,disablePortal=void 0!==_ref$disablePortal&&_ref$disablePortal,context=react.useContext(PortalContext),_React$useState=react.useState(),mountNode=_React$useState[0],setMountNode=_React$useState[1],handleRef=(0,md3_ui_hooks_cjs_prod.useForkRef)(react.isValidElement(children)?children.ref:null,ref),forceUpdate=(0,md3_ui_hooks_cjs_prod.useForceUpdate)();return(0,md3_ui_hooks_cjs_prod.useEnhancedEffect)((function(){forceUpdate()}),[]),(0,md3_ui_hooks_cjs_prod.useEnhancedEffect)((function(){var _containerRef$current;disablePortal||setMountNode((0,findNodeHandle.Z)(null!=(_containerRef$current=null==containerRef?void 0:containerRef.current)?_containerRef$current:context.rootRef.current))}),[null==containerRef?void 0:containerRef.current,disablePortal]),(0,md3_ui_hooks_cjs_prod.useEnhancedEffect)((function(){return mountNode&&!disablePortal?((0,md3_ui_hooks_cjs_prod.setRef)(ref,mountNode),function(){(0,md3_ui_hooks_cjs_prod.setRef)(ref,null)}):function(){}}),[ref,mountNode,disablePortal]),disablePortal?react.isValidElement(children)?react.cloneElement(children,{ref:handleRef}):children:mountNode?function createPortal(children,container){return"web"===Platform.Z.OS?react_dom.createPortal(children,container):createNativePortal(children,container)}(children,mountNode):null}));md3_ui_utils_cjs_prod.__DEV__&&(Portal.displayName="Portal");try{Portal.displayName="Portal",Portal.__docgenInfo={description:"",displayName:"Portal",props:{containerRef:{defaultValue:null,description:"",name:"containerRef",required:!1,type:{name:"RefObject<any>"}},disablePortal:{defaultValue:{value:"false"},description:"",name:"disablePortal",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/portal/src/portal.tsx#Portal"]={docgenInfo:Portal.__docgenInfo,name:"Portal",path:"packages/portal/src/portal.tsx#Portal"})}catch(__react_docgen_typescript_loader_error){}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const portal_stories={title:"Utils/Portal",component:Portal};var Basic=function Basic(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("p",{children:"Welcome"}),(0,jsx_runtime.jsx)(Portal,{children:"This text has been portaled"})]})},WithMountRef=function WithMountRef(){var ref=react.useRef(null);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("p",{children:"Welcome"}),(0,jsx_runtime.jsx)(Portal,{containerRef:ref,children:(0,jsx_runtime.jsx)("span",{children:"This text has been portaled"})}),(0,jsx_runtime.jsx)("div",{id:"iframe",ref,children:"Portal Div"})]})};Basic.parameters=_extends({storySource:{source:"() => (\n  <>\n    <p>Welcome</p>\n    <Portal>This text has been portaled</Portal>\n  </>\n)"}},Basic.parameters),WithMountRef.parameters=_extends({storySource:{source:'() => {\n  const ref = React.useRef<HTMLDivElement>(null)\n\n  return (\n    <>\n      <p>Welcome</p>\n      <Portal containerRef={ref}>\n        <span>This text has been portaled</span>\n      </Portal>\n      <div id="iframe" ref={ref}>\n        Portal Div\n      </div>\n    </>\n  )\n}'}},WithMountRef.parameters);var __namedExportsOrder=["Basic","WithMountRef"]}}]);